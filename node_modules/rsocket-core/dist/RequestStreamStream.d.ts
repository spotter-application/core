/// <reference types="node" />
import { CancelFrame, ErrorFrame, ExtFrame, FrameTypes, PayloadFrame, RequestNFrame, RequestStreamFrame } from "./Frames";
import { LeaseManager } from "./Lease";
import * as Reassembler from "./Reassembler";
import { Cancellable, OnExtensionSubscriber, OnNextSubscriber, OnTerminalSubscriber, Payload, Requestable } from "./RSocket";
import { Stream, StreamFrameHandler, StreamLifecycleHandler } from "./Transport";
export declare class RequestStreamRequesterStream implements Cancellable, Requestable, OnExtensionSubscriber, StreamFrameHandler, StreamLifecycleHandler, Reassembler.FragmentsHolder {
    private readonly payload;
    private readonly receiver;
    private readonly fragmentSize;
    private initialRequestN;
    private readonly leaseManager?;
    readonly streamType = FrameTypes.REQUEST_STREAM;
    private done;
    private stream;
    private hasExtension;
    private extendedType;
    private extendedContent;
    private flags;
    hasFragments: boolean;
    data: Buffer;
    metadata: Buffer;
    streamId: number;
    constructor(payload: Payload, receiver: OnTerminalSubscriber & OnNextSubscriber & OnExtensionSubscriber, fragmentSize: number, initialRequestN: number, leaseManager?: LeaseManager);
    handleReady(streamId: number, stream: Stream): boolean;
    handleReject(error: Error): void;
    handle(frame: PayloadFrame | ErrorFrame | ExtFrame): void;
    request(n: number): void;
    cancel(): void;
    onExtension(extendedType: number, content: Buffer | null | undefined, canBeIgnored: boolean): void;
    close(error?: Error): void;
}
export declare class RequestStreamResponderStream implements OnTerminalSubscriber, OnNextSubscriber, OnExtensionSubscriber, StreamFrameHandler, Reassembler.FragmentsHolder {
    readonly streamId: number;
    private readonly stream;
    private readonly fragmentSize;
    private readonly handler;
    readonly streamType = FrameTypes.REQUEST_STREAM;
    private readonly initialRequestN;
    private receiver?;
    private done;
    hasFragments: boolean;
    data: Buffer;
    metadata: Buffer;
    constructor(streamId: number, stream: Stream, fragmentSize: number, handler: (payload: Payload, initialRequestN: number, senderStream: OnTerminalSubscriber & OnNextSubscriber & OnExtensionSubscriber) => Cancellable & Requestable & OnExtensionSubscriber, frame: RequestStreamFrame);
    handle(frame: CancelFrame | ErrorFrame | PayloadFrame | RequestNFrame | ExtFrame): void;
    onError(error: Error): void;
    onNext(payload: Payload, isCompletion: boolean): void;
    onComplete(): void;
    onExtension(extendedType: number, content: Buffer, canBeIgnored: boolean): void;
    close(error?: Error): void;
}
